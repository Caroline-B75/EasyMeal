!!!
%html
  %head
    %title= content_for(:title) || "EasyMeal"
    %meta{name: "viewport", content: "width=device-width,initial-scale=1"}
    %meta{name: "apple-mobile-web-app-capable", content: "yes"}
    = csrf_meta_tags
    = csp_meta_tag

    = yield :head

    %link{rel: "manifest", href: "/manifest.json"}
    %link{rel: "icon", href: "/icon.png", type: "image/png"}
    %link{rel: "icon", href: "/icon.svg", type: "image/svg+xml"}
    %link{rel: "apple-touch-icon", href: "/icon.png"}
    = stylesheet_link_tag "application", "data-turbo-track": "reload"
    = javascript_importmap_tags

  %body
    -# Flash messages modernes
    - if notice.present? || alert.present?
      .flash-messages
        - if notice.present?
          .flash-message.notice{data: {controller: "flash"}}
            = notice
        - if alert.present?
          .flash-message.alert{data: {controller: "flash"}}
            = alert

    -# Navigation principale responsive
    - if user_signed_in?
      %header.main-header
        %nav.nav-container
          .nav-brand
            = link_to root_path, class: "brand-link" do
              = image_tag "logos/logo_EasyMeal.svg", alt: "EasyMeal", class: "logo"
          .nav-links
            %span.user-email
              Connecté : #{current_user.email}
            = link_to "Ingrédients", ingredients_path, class: "nav-link"
            = link_to "Se déconnecter", destroy_user_session_path, data: { turbo_method: :delete }, class: "nav-link logout-link"
    - else
      %header.main-header.auth-header
        %nav.nav-container
          .nav-brand
            = link_to root_path, class: "brand-link" do
              = image_tag "logos/logo_EasyMeal.svg", alt: "EasyMeal", class: "logo"
          .nav-links
            = link_to "Se connecter", new_user_session_path, class: "nav-link"
            = link_to "S'inscrire", new_user_registration_path, class: "nav-link btn-signup"

    %main.main-content
      = yield
